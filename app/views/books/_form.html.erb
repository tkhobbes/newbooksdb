  <%= simple_form_for book do |f| %>
    <%= render 'shared/form_errors', form: f %>
    <div class="big-form">
      <div class="form-col col-wide">
        <%= f.input :title, placeholder: 'Book Title', label: false %>
        <%= f.input :original_title, placeholder: 'Original Title', label: false %>
        <div class="big-form flex-align-center">
          <div class="form-col col-wide">
            <%= f.association(
              :author,
              label: false,
              collection: Author.order(:sort_name),
              label_method: :display_name, value_method: :id,
              prompt: 'Author...',
              input_html:
                { data:
                  {
                    controller: 'tom-select'
                  },
                  placeholder: 'Author',
                  class: 'width-100'
                }
            ) %>
          </div>
          <div class="form-col">
            <%= link_to 'Create new Author',
            new_author_path(source: 'book'),
            class: 'button-color-primary text-center',
            data: { action: "click->modal#open", turbo_stream: "" } %>
          </div>
        </div>
        <div class="big-form">
          <div class="form-col">
            <%= f.association(
              :publisher,
              label: false,
              input_html:
                { data:
                  {
                    controller: 'tom-select-add',
                    tom_select_add_url_value: '/publishers'
                  },
                  placeholder: 'Publisher'
                }
            ) %>
          </div>
          <div class="form-col">
            <%= f.input :year, placeholder: 'Year', label: false %>
          </div>
          <div class="form-col">
            <%= f.input :country,
              priority: ['United States', 'Germany', 'Switzerland', 'United Kingdom'],
              prompt: 'Country...',
              label: false,
              input_html: {
                data: {
                  controller: 'tom-select'
                },
                placeholder: 'Country',
              }
            %>
          </div>
        </div>
        <div class="big-form">
          <div class="form-col">
            <%= f.input :edition, placeholder: 'Edition', label: false %>
          </div>
          <div class="form-col">
            <%= f.association(
              :book_format,
              label: false,
              input_html:
                { data:
                  {
                    controller: 'tom-select-add',
                    tom_select_add_url_value: '/book_formats'
                  },
                  placeholder: 'Book Format'
                }
            ) %>
          </div>
        </div>
        <div class="big-form">
          <div
            class="form-col col-wide dropzone dropzone-default dz-clickable"
            data-controller="coverdrop"
            data-coverdrop-max-file-size="3"
            data-coverdrop-max-files="1">
            <%= f.file_field :cover, direct_upload: true,
              'data-coverdrop-target': 'input' %>
            <div class="dropzone-msg dz-message">
              <h3 class="dropzone-msg-title heading4 color-primary-dark">Drag cover image here or click to browse</h3>
              <span class="dropzone-msg-desc small color-primary-dark">3 MB file size maximum. Allowed are only image file types.</span>
            </div>
          </div>
          <div class="form-col">
            <%= cover_image(book, size: "small") %>
          </div>
        </div>
        <div class="rich-text-input">
          <h4 class="heading4 color-primary-dark">Synposis</h4>
          <%= f.rich_text_area :synopsis %>
        </div>
      </div>
      <div class="form-col">
        <div class="big-form">
          <div class="form-col enum_radio_buttons">
            <div class="color-primary-dark margin-bottom-50">Book Rating</div>
            <% Book.ratings.each do |k,v| %>
              <span class="radio">
                <%= f.radio_button :rating, k.to_sym, class: 'hidden-button' %>
                <%= f.label :rating, id: "label_rating_#{k}", for: "book_rating_#{k}" do %>
                  <span class="fake-button"></span>
                  <%= k.humanize %>
                <% end %>
              </span>
            <% end %>
          </div>
          <div class="form-col enum_radio_buttons">
            <div class="color-primary-dark margin-bottom-50">Book Condition</div>
            <% Book.conditions.each do |k,v| %>
              <span class="radio">
                <%= f.radio_button :condition, k.to_sym, class: 'hidden-button' %>
                <%= f.label :condition, id: "label_condition_#{k}", for: "book_condition_#{k}" do %>
                  <span class="fake-button"></span>
                  <%= k.humanize %>
                <% end %>
              </span>
            <% end %>
          </div>
        </div>
        <div class="color-primary-dark margin-bottom-50 margin-top-50">Genres</div>
        <%= f.association(
          :genres,
          label: false,
          input_html:
            { data:
              {
                controller: 'tom-select-add',
                tom_select_add_url_value: '/genres'
              },
            }
        ) %>
        <div class="color-primary-dark margin-bottom-50 margin-top-50">Tags</div>
        <%= f.association(
          :tags, collection: Tag.where(owner_id: current_owner.id).order(:name),
          label: false,
          input_html:
            { data:
              {
                controller: 'tom-select-add',
                tom_select_add_url_value: '/tags'
              },
            }
        ) %>
        <div class="color-primary-dark margin-bottom-50 margin-top-50">Shelf</div>
        <%= f.association(
          :shelf, collection: Shelf.where(owner_id: current_owner.id).order(:name),
          label: false,
          input_html:
            { data:
              {
                controller: 'tom-select-add',
                tom_select_add_url_value: '/shelves'
              },
            }
        ) %>
      </div>
    </div>
    <%= f.button :submit, 'data-action': 'click->coverdrop#submitAll' %>
    <%= back_link %>
  <% end %>
